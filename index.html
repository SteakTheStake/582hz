<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>582 Hz Tone Generator</title>
<style>
    body {
        background: #f5f5f5;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 20px;
        font-family: Arial, sans-serif;
    }
    button {
        padding: 15px 35px;
        font-size: 1.4rem;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        background: #333;
        color: white;
        transition: background 0.2s;
    }
    button:hover {
        background: #555;
    }
    input[type=range] {
        width: 250px;
    }
</style>
</head>
<body>

<button id="controlBtn">Start</button>

<div>
    <label>Volume: <span id="volLabel">33%</span></label><br>
    <input type="range" id="volumeSlider" min="0" max="100" value="33">
</div>

<script>
    let audioCtx = null;
    let oscillator = null;
    let gainNode = null;
    let playing = false;

    const btn = document.getElementById("controlBtn");
    const slider = document.getElementById("volumeSlider");
    const volLabel = document.getElementById("volLabel");

    // Update label + live volume
    slider.addEventListener("input", () => {
        const vol = slider.value / 100;
        volLabel.textContent = slider.value + "%";
        if (gainNode) gainNode.gain.value = vol;
    });

    btn.addEventListener("click", () => {
        if (!playing) {
            // Start tone
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            oscillator = audioCtx.createOscillator();
            gainNode = audioCtx.createGain();

            oscillator.type = "sine";
            oscillator.frequency.value = 582;
            gainNode.gain.value = slider.value / 100; // default 33%

            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            oscillator.start();

            playing = true;
            btn.textContent = "Stop";
        } else {
            // Stop tone
            oscillator.stop();
            oscillator.disconnect();
            gainNode.disconnect();
            audioCtx.close();

            playing = false;
            btn.textContent = "Start";
        }
    });
</script>

</body>
</html>
